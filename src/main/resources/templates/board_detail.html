<!-- board_detail.html -->
<html layout:decorate="~{layout}" xmlns:layout="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>board 생성</title>
</head>
<body>
<div layout:fragment="content">
    <div th:text="${board.subject}"></div>
    <div th:text="${board.content}"></div>
    <!-- 상세정보 -->

    <div>
        <div>현재 모집중인 인원수</div>
        <span >
            모집현황
            <span th:text="${board.currentNumber}"/>
            /
            <span th:text="${board.recruitNumber}"/>
        </span>
    </div>

    <div>
        <div>소모임 진행기간</div>
        <span>
            <span th:text="${board.startDay}"/>
            ~
            <span th:text="${board.endDay}"/>
        </span>
    </div>

    <div>
        <div>소모임 진행 구역</div>
        <div th:text="${board.region}"/>
    </div>

    <div>
        <div>이런 사람들에게 추천해요!</div>
        <div th:text="${board.recommendedTo}"/>
    </div>

    <form action="/participations" method="post" th:action="@{/participations}">
        <input type="hidden" name="boardId" th:value="${board.id}"/>
        <input type="hidden" name="_csrf" th:value="${_csrf.token}"/>
        <button type="submit">참여하기</button>
    </form>

    <div>
        <div>참여신청 인원(<span th:text="${board.participations.size()}"/>명)</div>
        <ul>
            <li th:each="participation : ${board.participations}">
                <span th:text="${participation.participant.username}"></span>
                <span th:text="${participation.participant.contactNumber}"></span>
                <span th:text="${participation.status}"></span>
                <form th:if="${participation.status == T(com.team4.team4.participation.Participation.ParticipationStatus).PENDING}" th:action="'/participations/' + ${participation.id} + '/approve'" method="post">
                    <input type="hidden" name="_csrf" th:value="${_csrf.token}"/>
                    <button type="submit">수락하기</button>
                </form>
                <form th:if="${participation.status == T(com.team4.team4.participation.Participation.ParticipationStatus).PENDING}" th:action="'/participations/' + ${participation.id} + '/reject'" method="post">
                    <input type="hidden" name="_csrf" th:value="${_csrf.token}"/>
                    <button type="submit">거절하기</button>
                </form>
                <form th:if="${participation.status == T(com.team4.team4.participation.Participation.ParticipationStatus).APPROVED}">
                    (수락됨)
                </form>
                <form th:if="${participation.status == T(com.team4.team4.participation.Participation.ParticipationStatus).REJECTED}">
                    (거절됨)
                </form>
                <form th:action="'/participations/' + ${participation.id}" method="post">
                    <input type="hidden" name="_method" value="delete"/>
                    <input type="hidden" name="_csrf" th:value="${_csrf.token}"/>
                    <button type="submit">신청취소</button>
                </form>
            </li>
        </ul>
    </div>
</div>
</body>
</html>
